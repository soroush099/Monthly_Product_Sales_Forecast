# مستندات فنی پروژه پیش‌بینی قیمت

این سند، معماری، ساختار کد و نحوه عملکرد پروژه پیش‌بینی قیمت محصول را تشریح می‌کند.

---

## ۱. معماری سیستم (Architecture)

در این بخش، نمای کلی از اجزای اصلی پروژه و نحوه تعامل آن‌ها با یکدیگر ارائه می‌شود.

### ۱.۱. دیاگرام معماری

در اینجا یک دیاگرام سطح بالا از معماری پروژه قرار دهید. این دیاگرام باید اجزای اصلی را نشان دهد.

*(مثال: تصویری که نشان می‌دهد داده‌ها از یک منبع ورودی وارد ماژول پردازش داده شده، سپس به مدل یادگیری ماشین برای آموزش یا پیش‌بینی ارسال می‌شوند و خروجی از طریق یک API نمایش داده می‌شود.)*

![Architecture Diagram](./assets/architecture.png)  *(<-- مسیر عکس دیاگرام خود را اینجا قرار دهید)*

### ۱.۲. اجزای اصلی (Components)

* **ماژول پردازش داده (`/data_processing`)**: مسئول پاک‌سازی، نرمال‌سازی و مهندسی ویژگی داده‌های ورودی است.
* **مدل یادگیری ماشین (`/model`)**: شامل اسکریپت‌های آموزش (`train.py`)، ارزیابی (`evaluate.py`) و ذخیره‌سازی مدل نهایی است. ما از الگوریتم `[نام الگوریتم مثلاً XGBoost]` استفاده کرده‌ایم.
* **API سرور (`/api`)**: یک API مبتنی بر Flask/FastAPI که ورودی را از کاربر دریافت کرده، به مدل ارسال می‌کند و قیمت پیش‌بینی‌شده را برمی‌گرداند.
* **پایگاه داده / منبع داده (`/data`)**: داده‌های خام و پردازش‌شده در این بخش نگهداری می‌شوند.

### ۱.۳. پشته فناوری (Technology Stack)

* **زبان**: Python 3.9
* **کتابخانه‌ها**: Pandas, Scikit-learn, NumPy, FastAPI
* **ابزارها**: Git, Docker (اختیاری)

---

## ۲. نحوه عملکرد (How It Works)

این بخش جریان داده و منطق اصلی پروژه را به صورت گام به گام توضیح می‌دهد.

### ۲.۱. جریان آموزش مدل (Training Flow)

1.  داده‌های خام از فایل `data/raw/products.csv` خوانده می‌شوند.
2.  اسکریپت `data_processing/cleaner.py` اجرا شده و داده‌ها را پاک‌سازی می‌کند.
3.  اسکریپت `train.py` مدل را با استفاده از داده‌های تمیز شده آموزش می‌دهد.
4.  مدل آموزش‌دیده و معیارهای ارزیابی آن در پوشه `/model/saved_model` ذخیره می‌شوند.

### ۲.۲. جریان پیش‌بینی (Prediction Flow)

1.  کاربر از طریق اندپوینت `POST /predict` یک درخواست حاوی ویژگی‌های محصول ارسال می‌کند.
2.  API داده‌های ورودی را اعتبارسنجی می‌کند.
3.  داده‌ها برای مدل آماده‌سازی می‌شوند (همان فرآیندی که در زمان آموزش طی شده).
4.  مدل ذخیره‌شده (`model.pkl`) بارگذاری شده و پیش‌بینی را انجام می‌دهد.
5.  نتیجه در قالب JSON به کاربر بازگردانده می‌شود.

---

## ۳. ساختار کد (Code Structure)

در این بخش، ساختار پوشه‌ها و فایل‌های مهم پروژه توضیح داده می‌شود.

```
.
├── api/
│   └── main.py         # سرور API و اندپوینت‌ها
├── data/
│   ├── raw/            # داده‌های خام
│   └── processed/      # داده‌های پردازش‌شده
├── model/
│   ├── saved_model/    # فایل‌های مدل ذخیره‌شده
│   ├── train.py        # اسکریپت آموزش مدل
│   └── predict.py      # اسکریپت برای پیش‌بینی
├── notebooks/
│   └── data_exploration.ipynb  # نوت‌بوک تحلیل اولیه داده‌ها
├── .gitignore
├── README.md
└── requirements.txt    # لیست کتابخانه‌های مورد نیاز
```

### ۳.۱. فایل‌های کلیدی

* **`api/main.py`**: قلب تپنده API. شامل منطق دریافت درخواست و ارسال پاسخ است.
* **`model/train.py`**: مهم‌ترین فایل برای بازتولید (reproduce) نتایج مدل. هر کسی با اجرای این فایل باید بتواند مدل را دوباره آموزش دهد.
* **`requirements.txt`**: لیستی از تمام وابستگی‌های پروژه برای نصب آسان.

---

## ۴. راه‌اندازی و اجرا (Setup and Usage)

برای اجرای پروژه به صورت محلی، مراحل زیر را دنبال کنید:

1.  **نصب وابستگی‌ها:**
    ```bash
    pip install -r requirements.txt
    ```
2.  **آموزش مدل:**
    ```bash
    python model/train.py
    ```
3.  **اجرای سرور API:**
    ```bash
    uvicorn api.main:app --reload
    ```
